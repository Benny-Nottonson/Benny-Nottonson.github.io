<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Spotify Sorter</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="author" content="Benny Nottonson">
		<link rel="stylesheet" href="styles.css">
		<meta http-equiv="Permissions-Policy" content="interest-cohort=()">
        <link rel="icon" href="favicon.ico" type="image/x-icon">
	</head>
	<body>
        <div class="mainwrapper">
            <header>
                <svg class="header-rectangle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                    <rect class="header-rectangle"></rect>
                </svg>
                <div class="header-container">
                    <img class="header-logo" src="spotifySort.png" alt="Spotify Sorter Logo">
                    <div class="header-title">
                        <h1>Spotify Sorter</h1>
                    </div>
                </div>
            </header>
            <div class="main">
                <div class="subtitle">
                    <h2>Enhance your playlists</h2>
                </div>
                <div class="title">
                    <h1>Spotify<br>Sorter</h1>
                </div>
                <a class="button login" href="">
                    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
                    <svg class = "spotifylogo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512">
                        <path fill="#1ed760" d="M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8Z"/>
                        <path d="M406.6 231.1c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3zm-31 76.2c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm-26.9 65.6c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4z"/>
                    </svg>
                    Login with Spotify
                </a>
            </div>
            <a class="home" href="index.html">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
            </a>
            <svg class="wave" style="transform:rotate(0deg); transition: 0.3s" viewBox="0 0 1000 490" version="1.1" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="sw-gradient-0" x1="0" x2="0" y1="1" y2="0">
                        <stop stop-color="rgba(29, 185, 84, 1)" offset="0%"></stop>
                        <stop stop-color="rgba(18, 18, 18, 1)" offset="100%"></stop>
                    </linearGradient>
                </defs>
                <path style="transform:translate(0, 0px); opacity:1" fill="url(#sw-gradient-0)" d="M0,294L34.3,318.5C68.6,343,137,392,206,367.5C274.3,343,343,245,411,228.7C480,212,549,278,617,277.7C685.7,278,754,212,823,220.5C891.4,229,960,310,1029,302.2C1097.1,294,1166,196,1234,204.2C1302.9,212,1371,327,1440,367.5C1508.6,408,1577,376,1646,302.2C1714.3,229,1783,114,1851,81.7C1920,49,1989,98,2057,147C2125.7,196,2194,245,2263,220.5C2331.4,196,2400,98,2469,65.3C2537.1,33,2606,65,2674,98C2742.9,131,2811,163,2880,220.5C2948.6,278,3017,359,3086,400.2C3154.3,441,3223,441,3291,400.2C3360,359,3429,278,3497,220.5C3565.7,163,3634,131,3703,155.2C3771.4,180,3840,261,3909,310.3C3977.1,359,4046,376,4114,351.2C4182.9,327,4251,261,4320,236.8C4388.6,212,4457,229,4526,253.2C4594.3,278,4663,310,4731,318.5C4800,327,4869,310,4903,302.2L4937.1,294L4937.1,490L4902.9,490C4868.6,490,4800,490,4731,490C4662.9,490,4594,490,4526,490C4457.1,490,4389,490,4320,490C4251.4,490,4183,490,4114,490C4045.7,490,3977,490,3909,490C3840,490,3771,490,3703,490C3634.3,490,3566,490,3497,490C3428.6,490,3360,490,3291,490C3222.9,490,3154,490,3086,490C3017.1,490,2949,490,2880,490C2811.4,490,2743,490,2674,490C2605.7,490,2537,490,2469,490C2400,490,2331,490,2263,490C2194.3,490,2126,490,2057,490C1988.6,490,1920,490,1851,490C1782.9,490,1714,490,1646,490C1577.1,490,1509,490,1440,490C1371.4,490,1303,490,1234,490C1165.7,490,1097,490,1029,490C960,490,891,490,823,490C754.3,490,686,490,617,490C548.6,490,480,490,411,490C342.9,490,274,490,206,490C137.1,490,69,490,34,490L0,490Z"></path>
                <defs>
                    <linearGradient id="sw-gradient-1" x1="0" x2="0" y1="1" y2="0">
                        <stop stop-color="rgba(29, 185, 84, 1)" offset="0%"></stop>
                        <stop stop-color="rgba(18, 18, 18, 1)" offset="100%"></stop>
                    </linearGradient>
                </defs>
                <path style="transform:translate(0, 50px); opacity:0.9" fill="url(#sw-gradient-1)" d="M0,147L34.3,155.2C68.6,163,137,180,206,228.7C274.3,278,343,359,411,375.7C480,392,549,343,617,326.7C685.7,310,754,327,823,334.8C891.4,343,960,343,1029,294C1097.1,245,1166,147,1234,98C1302.9,49,1371,49,1440,89.8C1508.6,131,1577,212,1646,253.2C1714.3,294,1783,294,1851,277.7C1920,261,1989,229,2057,245C2125.7,261,2194,327,2263,326.7C2331.4,327,2400,261,2469,269.5C2537.1,278,2606,359,2674,359.3C2742.9,359,2811,278,2880,212.3C2948.6,147,3017,98,3086,114.3C3154.3,131,3223,212,3291,245C3360,278,3429,261,3497,212.3C3565.7,163,3634,82,3703,40.8C3771.4,0,3840,0,3909,65.3C3977.1,131,4046,261,4114,294C4182.9,327,4251,261,4320,204.2C4388.6,147,4457,98,4526,130.7C4594.3,163,4663,278,4731,318.5C4800,359,4869,327,4903,310.3L4937.1,294L4937.1,490L4902.9,490C4868.6,490,4800,490,4731,490C4662.9,490,4594,490,4526,490C4457.1,490,4389,490,4320,490C4251.4,490,4183,490,4114,490C4045.7,490,3977,490,3909,490C3840,490,3771,490,3703,490C3634.3,490,3566,490,3497,490C3428.6,490,3360,490,3291,490C3222.9,490,3154,490,3086,490C3017.1,490,2949,490,2880,490C2811.4,490,2743,490,2674,490C2605.7,490,2537,490,2469,490C2400,490,2331,490,2263,490C2194.3,490,2126,490,2057,490C1988.6,490,1920,490,1851,490C1782.9,490,1714,490,1646,490C1577.1,490,1509,490,1440,490C1371.4,490,1303,490,1234,490C1165.7,490,1097,490,1029,490C960,490,891,490,823,490C754.3,490,686,490,617,490C548.6,490,480,490,411,490C342.9,490,274,490,206,490C137.1,490,69,490,34,490L0,490Z"></path>
            </svg>
        </div>
        <script>
            if (localStorage.getItem('accessToken')) {
			    window.location.href = 'app.html';
			}
			
			var client_id = 'b6bc56d7dc814e90b19c99b4249bcf86';
			var redirect_uri = window.location.href;
			redirect_uri = redirect_uri.substring(0, redirect_uri.lastIndexOf('/'));
			redirect_uri += '/callback.html';
            console.log(redirect_uri);
			var scope = 'playlist-read-private playlist-modify-public playlist-modify-private';
			
			function login() {
			    var loginWindow = window.open('https://accounts.spotify.com/authorize?client_id=' + client_id + '&scope=' + scope + '&response_type=token&redirect_uri=' + redirect_uri, 'Spotify', 'width=400,height=500');
			    loginWindow.onbeforeunload = function() {
			        checkLogin();
			    }
			}
			
			function checkLogin() {
			    if (window.location.hash) {
			        var access_token = window.location.hash.substring(14);
			        localStorage.setItem('access_token', access_token);
			        window.location = 'index.html';
			    }
			}
            
            document.getElementsByClassName('login')[0].addEventListener('click', login);
        </script>
	</body>
</html>